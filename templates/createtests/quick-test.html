{% extends 'base.html' %}
{% load static %}

{% block content %}

<style>

    .info-icon {
    display: inline-block;
    width: 13px;
    height: 13px;
    background: url("{% static '/img/info.png' %}") no-repeat center center;
    background-size: contain; /* This property scales the background image to fit inside the container while preserving its aspect ratio */
    background-repeat: no-repeat; /* This property prevents the background image from repeating */
    background-position: center center; /* This property centers the background image both horizontally and vertically */
    cursor: pointer;
  }
  /* Styling for the overlay div */
  #overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: WHITE;
    display: none;
  }

  /* Center the loading animation */
  #loading-animation {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 9999; /* Ensure the animation is on top of other elements */
  }

</style>

<div class="container mt-4">
  <nav aria-label="Exam Info">
    <h1>Exam Info</h1>
    <h3>1. Exam Header</h3>
  </nav>

  <div class="card">
    <div class="card-body">
      <form action="{% url 'quick-test' %}" method="post" id="quick-test-form">
        {% include 'partials/_messages.html'%} {% csrf_token %}
        <!-- Add a loading animation to be displayed during the form submission -->


<div>
  <div class="row">
    <div class="col-md-8">
      <div class="form-group">
        <label for="">Teaching Material*               <label class="info-tooltip" for="">
              <span class="info-icon"></span>
                    <span class="info-text">Enter the name of your institution.</span>
            </label></label>
        <textarea class="form-control form-control-sm" id="teaching-material" name="teaching_material" style="height: 400px;">{{values.teaching_material}}</textarea>
      </div>
    </div>
    <div class="col-md-4">
      <div class="form-group">
        <label for="">Upload Text File</label><br>
        <div class="file-drop-area">
          <input type="file" class="btn btn-primary btn-sm" id="file-input">
          <span class="file-drop-text">Drag and drop files here or select a file</span>
        </div>
      </div>
    </div>
  </div>
</div>

          <div class="form-group">
            <label for="">Exam tag                <label class="info-tooltip" for="">
              <span class="info-icon"></span>
                    <span class="info-text">Enter the name of your institution.</span>
            </label></label>
            <input
              type="text"
              class="form-control form-control-sm"
              name="tag"
              value="{{values.tag}}"
            />
          </div>
<div>
   <h3>4. Questions               <label class="info-tooltip" for="">
              <span class="info-icon"></span>
                    <span class="info-text">Enter the name of your institution.</span>
            </label> </h3>
  <div class="row">
    <div class="col-md-6">
      <div class="form-group">
        <label for="">Question Types</label>
        <div class="question_types">
          <div>
            <label for="">Multiple Choice Questions</label>&nbsp
            <input type="text" name="mcq" class="question-type" pattern="[0-9]*" value="{{values.mcq}}" > <br>
            <label for="">Multiple Selection Questions</label>&nbsp
            <input type="text" name="msq" class="question-type" pattern="[0-9]*" value="{{values.msq}}" ><br>
            <label for="">Open Answer Questions</label>&nbsp
            <input type="text" name="oaq" class="question-type" pattern="[0-9]*" value="{{values.oaq}}" >
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-group">
        <label for="">Total Questions</label>
        <div class="number_of_questions">
          <span id="total-questions">0</span>
        </div>
      </div>
    </div>
  </div>
</div>

        <input type="hidden" id="current-page" value="1">

<button type="button" class="btn btn-primary btn-primary-sm" id="prev-page">Previous</button>
<button type="button" class="btn btn-primary btn-primary-sm" id="next-page">Next</button>
<input type="submit" value="Submit" class="btn btn-primary btn-primary-sm"  />
</form>


      <div id="overlay"></div>
      <div id="loading-animation" style="display: none;">
        <!-- Add your loading animation here (e.g., spinner image, CSS animation, etc.) -->
          <h1>Preparing your exam...</h1>
            <img src="{% static '/img/loading.gif' %}" alt="Animated GIF">

      </div>


</div>
</div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
  <script src="{% static 'js/grades.js' %}"></script>
<script>
  $(document).ready(function() {
    // Intercept form submission
    $('#quick-test-form').on('submit', function(e) {
      e.preventDefault(); // Prevent default form submission

      // Show the overlay and loading animation
      $('#overlay').show();
      $('#loading-animation').show();

      // Send the form data using AJAX
      $.ajax({
        url: $(this).attr('action'),
        type: $(this).attr('method'),
        data: $(this).serialize(),
        success: function(response) {
          // Hide the overlay and loading animation
          $('#overlay').hide();
          $('#loading-animation').hide();

          // Redirect to 'choose-create-speed.html'
          window.location.href = '/my-tests/';
        },
        error: function(error) {
          // Handle error if needed
          console.log(error);
          // Hide the overlay and loading animation in case of an error
          $('#overlay').hide();
          $('#loading-animation').hide();
        }
      });
    });
  });
</script>

</div>


{% endblock %}